<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCF-Online</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
    /* 全局样式 */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding-top: 20px;
        padding-bottom: 20px;
        background-color: #f8f9fa;
        transition: background-color 0.3s ease;
    }
    
    /* 页面标题 */
    .page-title {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .page-title h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: #333;
        margin-bottom: 10px;
        transition: color 0.3s ease;
    }
    
    .page-title p {
        font-size: 1.1rem;
        color: #6c757d;
        transition: color 0.3s ease;
    }
    
    /* 主容器 */
    .main-container {
        max-width: 1200px;
        margin: 0 auto;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        padding: 30px;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    
    /* 按钮容器 */
    .button-container {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
    }
    
    /* 按钮样式 */
    .custom-btn {
        padding: 10px 20px;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
    }
    
    .reset-btn {
        background-color: #e0e0e0;
        color: #333;
    }
    
    .reset-btn:hover {
        background-color: #d0d0d0;
    }
    
    .dark-mode-btn {
        background-color: #4d4d4d;
        color: #fff;
    }
    
    .dark-mode-btn:hover {
        background-color: #3a3a3a;
    }
    
    /* 搜索按钮样式 */
    .search-container {
        margin-bottom: 25px;
    }
    
    #search-input {
        padding: 12px 15px;
        border: 1px solid #d1d1e0;
        border-radius: 30px;
        font-size: 16px;
        width: 100%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }
    
    #search-input:focus {
        border-color: #5d78ff;
        outline: none;
        box-shadow: 0 0 0 3px rgba(93, 120, 255, 0.25);
    }
    
    /* 筛选器样式 */
    .filter-container {
        margin-bottom: 25px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        background-color: #f9f9f9;
        transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    
    .filter-group label {
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
        display: block;
        transition: color 0.3s ease;
    }
    
    .filter-group select {
        padding: 10px 15px;
        border: 1px solid #d1d1e0;
        border-radius: 6px;
        font-size: 15px;
        width: 100%;
        background-color: #fff;
        transition: all 0.3s ease;
    }
    
    .filter-group select:focus {
        border-color: #5d78ff;
        outline: none;
        box-shadow: 0 0 0 3px rgba(93, 120, 255, 0.25);
    }
    
   /* 表格容器样式 */
    .table-container {
        overflow-x: auto; /* 添加横向滚动条 */
        margin-top: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        width: 100%;
        display: block; /* 确保表格容器是一个块级元素 */
        position: relative; /* 添加相对定位 */
    }

    /* 表格样式 */
    table.table {
        width: 100%; /* 表格宽度自适应 */
        min-width: 1000px; /* 最小宽度 */
        color: #333;
        margin-bottom: 0;
        border-collapse: collapse; /* 合并表格边框 */
    }

    /* 表格单元格样式 */
    table.table th, table.table td {
        padding: 14px 12px;
        border-bottom: 1px solid #e0e0e0;
        vertical-align: middle;
        transition: background-color 0.3s ease;
        word-break: break-word; /* 允许长词换行 */
        white-space: normal; /* 允许内容自动换行 */
        box-sizing: border-box; /* 边框为内边框 */
    }
        /* 限制表格列的宽度 */
        table.table th:nth-child(1),
        table.table td:nth-child(1) {
            max-width: 120px;
        }
        
        table.table th:nth-child(2),
        table.table td:nth-child(2) {
            max-width: 80px;
        }
        
        table.table th:nth-child(3),
        table.table td:nth-child(3) {
            max-width: 80px;
        }
        
        table.table th:nth-child(4),
        table.table td:nth-child(4) {
            max-width: 100px;
        }
        
        table.table th:nth-child(5),
        table.table td:nth-child(5) {
            max-width: 150px;
        }
        
        table.table th:nth-child(6),
        table.table td:nth-child(6) {
            max-width: 120px;
        }
    
    table.table tr:hover {
        background-color: #f5f7ff;
    }
    
    /* 链接样式 */
    table.table td a {
        color: #4d6fff;
        font-weight: 600;
        text-decoration: none;
        transition: color 0.3s ease;
    }
    
    table.table td a:hover {
        color: #2a49d1;
        text-decoration: underline;
    }
    
    /* 无结果提示 */
    .no-results {
        text-align: center;
        padding: 40px 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
        margin-top: 20px;
        transition: background-color 0.3s ease;
    }
    
    .no-results p {
        font-size: 18px;
        color: #6c757d;
        transition: color 0.3s ease;
    }
    
    /* 夜间模式样式 */
    body.dark-mode {
        background-color: #1a1a2e;
    }
    
    body.dark-mode .page-title h1 {
        color: #e0e0e0;
    }
    
    body.dark-mode .page-title p {
        color: #b0b0b0;
    }
    
    body.dark-mode .main-container {
        background-color: #252539;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    body.dark-mode .filter-container {
        background-color: #2a2a40;
        border-color: #3a3a50;
    }
    
    body.dark-mode .filter-group label {
        color: #e0e0e0;
    }
    
    body.dark-mode .filter-group select {
        background-color: #33334d;
        color: #e0e0e0;
        border-color: #444460;
    }
    
    body.dark-mode .filter-group select:focus {
        border-color: #5d78ff;
        box-shadow: 0 0 0 3px rgba(93, 120, 255, 0.3);
    }
    
    body.dark-mode table.table {
        color: #e0e0e0;
        background-color: #252539;
    }

    body.dark-mode table.table tbody tr td {
        background-color: #252539 !important;
        color: #e0e0e0 !important;
    }
    
    body.dark-mode table.table th {
        background-color: #2a2a40;
        color: #e0e0e0;
        border-color: #3a3a50;
    }
    
    body.dark-mode table.table td {
        border-color: #3a3a50;
    }
    
    body.dark-mode table.table tr:hover {
        background-color: #2a2a40;
    }
    
    body.dark-mode table.table td a {
        color: #64a0ff;
    }
    
    body.dark-mode table.table td a:hover {
        color: #8ab1ff;
    }
    
    body.dark-mode .no-results {
        background-color: #2a2a40;
    }
    
    body.dark-mode .no-results p {
        color: #b0b0b0;
    }
    
     /* 响应式调整 */
    @media (max-width: 768px) {
        .main-container {
            padding: 15px;
        }
        
        .filter-group {
            margin-bottom: 15px;
        }
        
        table.table th,
        table.table td {
            padding: 8px 6px;
            font-size: 14px;
        }
        
        /* 表格在小屏幕上的横向滚动 */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* 平滑滚动效果 */
            margin-bottom: 20px;
        }
        /* 限制表格列的宽度 */
        table.table th:nth-child(1),
        table.table td:nth-child(1) {
            max-width: 100px;
        }
        
        table.table th:nth-child(2),
        table.table td:nth-child(2) {
            max-width: 50px;
        }
        
        table.table th:nth-child(3),
        table.table td:nth-child(3) {
            max-width: 50px;
        }
        
        table.table th:nth-child(4),
        table.table td:nth-child(4) {
            max-width: 80px;
        }
        
        table.table th:nth-child(5),
        table.table td:nth-child(5) {
            max-width: 100px;
        }
        
        table.table th:nth-child(6),
        table.table td:nth-child(6) {
            max-width: 50px;
        }
    }
</style>
</head>
<body>
    <div class="container">
	<div class="page-title">
            <h1>CCF Online</h1>
            <p>作者: William-Liwei，上海大学 Shanghai University</p>
        </div>
	<div class="button-container">
            <button class="custom-btn reset-btn" id="reset-btn">清空所有选项</button>
            <button class="custom-btn dark-mode-btn" id="dark-mode-btn">夜间模式</button>
        </div>
        <div class="search-container">
            <input type="text" id="search-input" class="form-control" placeholder="输入关键词搜索...">
        </div>
        <div class="filter-container">
            <div class="row">
                <div class="col-md-3">
                    <div class="filter-group">
                        <label for="category-filter" class="form-label">类别</label>
                        <select id="category-filter" class="form-select">
                            <option value="all">所有类别</option>
                            <!-- 类别选项将通过 JavaScript 动态填充 -->
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="filter-group">
                        <label for="type-filter" class="form-label">类型</label>
                        <select id="type-filter" class="form-select">
                            <option value="all">所有类型</option>
                            <!-- 类型选项将通过 JavaScript 动态填充 -->
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="filter-group">
                        <label for="level-filter" class="form-label">级别</label>
                        <select id="level-filter" class="form-select">
                            <option value="all">所有级别</option>
                            <option value="A">A类</option>
                            <option value="B">B类</option>
                            <option value="C">C类</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="filter-group">
                        <label for="publisher-filter" class="form-label">出版社</label>
                        <select id="publisher-filter" class="form-select">
                            <option value="all">所有出版社</option>
                            <!-- 出版社选项将通过 JavaScript 动态填充 -->
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="table-container">
            <table class="table table-striped" id="data-table">
                <thead>
                    <tr>
                        <th>领域</th>
                        <th>类型</th>
                        <th>级别</th>
                        <th>简称</th>
			<th>全称</th>
                        <th>出版社</th>
                        <th>链接</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- 表格内容将通过 JavaScript 动态填充 -->
                </tbody>
            </table>
            <div class="no-results" id="no-results" style="display: none;">
                <p>没有找到符合条件的数据。</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let parsedData = [];

            // 读取本地的 Markdown 文件
            fetch('index.md')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('无法读取Markdown文件');
                    }
                    return response.text();
                })
                .then(markdownText => {
                    // 解析Markdown内容并提取数据
                    parsedData = parseMarkdown(markdownText);
                    
                    if (parsedData.length === 0) {
                        throw new Error('解析Markdown文件时未找到有效数据');
                    }
                    
                    // 填充下拉菜单选项
                    populateFilterOptions(parsedData);
                    
                    // 初始化表格显示全部数据
                    applyFilters();
                })
                .catch(error => {
                    console.error('Error loading or parsing Markdown file:', error);
                    const tableBody = document.getElementById('table-body');
                    tableBody.innerHTML = '<tr><td colspan="6" class="text-center">无法加载数据: ' + error.message + '</td></tr>';
                    document.getElementById('no-results').style.display = 'block';
                });

            // 解析Markdown内容并提取数据
            function parseMarkdown(markdownText) {
                const lines = markdownText.split('\n');
                const data = [];
                let currentCategory = '';
                let currentType = '';
                let currentLevel = 'N';
                
                const tableRegexp = /\|[^|]*\|[^|]*\|[^|]*\|[^|]*\|[^|]*\|/;
                
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    // 检测类别（例如：##### 中国计算机学会推荐国际学术会议（计算机体系结构***/***并行与分布计算***/***存储系统））
        if (line.startsWith('#####')) {

	    if (line.startsWith('######')) {
                const levelMatch = line.match(/(A|B|C)/); // 匹配 A类、B类、C类
                if (levelMatch) {
                    currentLevel = levelMatch[1];
                }
                continue;
            }

            const headingText = line.substring(5).trim(); // 移除'##### '部分
            const categoryMatch = headingText.match(/（(.*)）/);
            const typeMatch = headingText.match(/(期刊|会议)/);

            if (categoryMatch) {
                currentCategory = categoryMatch[1].replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').replace('*', '').trim();
            }
            if (typeMatch) {
                currentType = typeMatch[1];
            }
            continue;
        }






                    
                    // 检测表格行
                    if (line.startsWith('|') && tableRegexp.test(line)) {
                        const columns = line.split('|').map(col => col.trim());
                        
                        // 跳过表头和分隔行
                        if (columns[1] === '序号' || columns[1].startsWith('-')) {
                            continue;
                        }
                        
                        // 提取数据
                        const name = columns[2];
			const totalname = columns[3];
                        const publisher = columns[4].replace('*', '').replace('*', '').replace('*', '').replace('*', '');
                        const url = columns[5].replace('*', '').replace('*', '').replace('*', '').replace('*', '').trim();
                        
                        if (totalname) {
                            data.push({
                                category: currentCategory,
                                type: currentType,
                                level: currentLevel,
                                name: name,
				totalname:totalname,
                                publisher: publisher,
                                url: url
                            });
                        }
                    }
                }
                
                return data;
            }

            // 填充筛选下拉菜单选项
            function populateFilterOptions(data) {
                const categoryOptions = [...new Set(data.map(item => item.category))];
                const typeOptions = [...new Set(data.map(item => item.type))];
                const publisherOptions = [...new Set(data.map(item => item.publisher))];
                
                const categoryFilter = document.getElementById('category-filter');
                const typeFilter = document.getElementById('type-filter');
                const publisherFilter = document.getElementById('publisher-filter');
                
                // 填充类别选项
                categoryOptions.forEach(category => {
                    if (category) {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        categoryFilter.appendChild(option);
                    }
                });
                
                // 填充类型选项
                typeOptions.forEach(type => {
                    if (type && type !== '') {
                        const option = document.createElement('option');
                        option.value = type;
                        option.textContent = type;
                        typeFilter.appendChild(option);
                    }
                });
                
                // 填充出版社选项
                publisherOptions.forEach(publisher => {
                    if (publisher && publisher !== '') {
                        const option = document.createElement('option');
                        option.value = publisher;
                        option.textContent = publisher;
                        publisherFilter.appendChild(option);
                    }
                });
            }

            // 填充表格
            function populateTable(data) {
                const tableBody = document.getElementById('table-body');
                tableBody.innerHTML = '';
                
                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.category}</td>
                        <td>${item.type}</td>
                        <td>${item.level}</td>
                        <td>${item.name}</td>
			<td>${item.totalname}</td>
                        <td>${item.publisher}</td>
                        <td><a href="${item.url}" target="_blank">访问</a></td>
                    `;
                    tableBody.appendChild(row);
                });
                
                if (data.length === 0) {
                    document.getElementById('no-results').style.display = 'block';
                } else {
                    document.getElementById('no-results').style.display = 'none';
                }
            }

            // 筛选和搜索功能
            const searchInput = document.getElementById('search-input');
            const categoryFilter = document.getElementById('category-filter');
            const typeFilter = document.getElementById('type-filter');
            const levelFilter = document.getElementById('level-filter');
            const publisherFilter = document.getElementById('publisher-filter');

            function applyFilters() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                const categoryValue = categoryFilter.value;
                const typeValue = typeFilter.value;
                const levelValue = levelFilter.value;
                const publisherValue = publisherFilter.value;

                const filteredData = parsedData.filter(item => {
                    const matchesSearch = searchTerm === '' || 
                        item.name.toLowerCase().includes(searchTerm) || 
			item.totalname.toLowerCase().includes(searchTerm) || 
                        item.publisher.toLowerCase().includes(searchTerm);
                    const matchesCategory = categoryValue === 'all' || item.category === categoryValue;
                    const matchesType = typeValue === 'all' || item.type === typeValue;
                    const matchesLevel = levelValue === 'all' || item.level === levelValue;
                    const matchesPublisher = publisherValue === 'all' || item.publisher === publisherValue;

                    return matchesSearch && matchesCategory && matchesType && matchesLevel && matchesPublisher;
                });

                populateTable(filteredData);
            }

	    // 清空所有选项按钮
            document.getElementById('reset-btn').addEventListener('click', function() {
                searchInput.value = '';
                categoryFilter.value = 'all';
                typeFilter.value = 'all';
                levelFilter.value = 'all';
                publisherFilter.value = 'all';
                applyFilters();
            });
let isDarkMode = false;
            // 夜间模式按钮
            document.getElementById('dark-mode-btn').addEventListener('click', function() {
                isDarkMode = !isDarkMode;
                if (isDarkMode) {
                    document.body.classList.add('dark-mode');
                    this.textContent = '日间模式';
                } else {
                    document.body.classList.remove('dark-mode');
                    this.textContent = '夜间模式';
                }
            });

            searchInput.addEventListener('input', applyFilters);
            categoryFilter.addEventListener('change', applyFilters);
            typeFilter.addEventListener('change', applyFilters);
            levelFilter.addEventListener('change', applyFilters);
            publisherFilter.addEventListener('change', applyFilters);
        });
    </script>
</body>
</html>